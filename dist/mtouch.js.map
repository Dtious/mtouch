{"version":3,"file":"mtouch.js","sources":["../src/utils.js","../src/singleBtn.js","../src/handlerBus.js","../src/index.js"],"sourcesContent":["let sheet;\nexport default {\n    getLength(v1) {\n        if (typeof v1 !== 'object') {\n            console.error('getLength error!');\n            return;\n        }\n        return Math.sqrt(v1.x * v1.x + v1.y * v1.y);\n    },\n    getAngle(v1, v2) {\n        if (typeof v1 !== 'object' || typeof v2 !== 'object') {\n            console.error('getAngle error!');\n            return;\n        }\n        // 判断方向，顺时针为 1 ,逆时针为 -1；\n        let direction = v1.x * v2.y - v2.x * v1.y > 0 ? 1: -1,\n            // 两个向量的模；\n            len1 = this.getLength(v1),\n            len2 = this.getLength(v2),\n            mr = len1 * len2,\n            dot,r;\n        if (mr === 0)return 0;\n        // 通过数量积公式可以推导出：\n        // cos = (x1 * x2 + y1 * y2)/(|a| * |b|);\n        dot = v1.x * v2.x + v1.y * v2.y;\n        r = dot / mr;\n        if (r > 1)r = 1;\n        if (r < -1)r = -1;\n        // 解值并结合方向转化为角度值；\n        return Math.acos(r) * direction * 180 / Math.PI;\n    },\n    getBasePoint(el) {\n        if (!el) return {x:0,y:0};\n        let offset = this.getOffset(el);\n        let x = offset.left + el.getBoundingClientRect().width / 2,\n            y = offset.top + el.getBoundingClientRect().width / 2;\n        return {x: Math.round(x), y: Math.round(y)};\n    },\n    extend(obj1, obj2) {\n        for (let k in obj2) {\n            if (obj2.hasOwnProperty(k)) {\n                if(typeof obj2[k] == 'object' && !(obj2[k] instanceof Node)){\n                    if(typeof obj1[k] !== 'object'){\n                        obj1[k] = {};\n                    }\n                    this.extend(obj1[k],obj2[k]);\n                }else{\n                    obj1[k] = obj2[k];\n                }\n            }\n        }\n        return obj1;\n    },\n    getVector(p1, p2) {\n        if (typeof p1 !== 'object' || typeof p2 !== 'object' ) {\n            console.error('getvector error!');\n            return;\n        }\n        let x = Math.round(p1.x - p2.x),\n            y = Math.round(p1.y - p2.y);\n        return { x, y };\n    },\n    getPoint(ev, index) {\n        if (!ev || !ev.touches[index]) {\n            console.error('getPoint error!');\n            return;\n        }\n        return {\n            x: Math.round(ev.touches[index].pageX),\n            y: Math.round(ev.touches[index].pageY),\n        };\n    },\n    getOffset(el){\n        el = typeof el == 'string'? document.querySelector(el): el;\n        let rect = el.getBoundingClientRect();\n        let offset = {\n            left:rect.left + document.body.scrollLeft,\n            top:rect.top + document.body.scrollTop,\n            width:el.offsetWidth,\n            height:el.offsetHeight,\n        };\n        return offset;\n    },\n    matrixTo(matrix){\n        let arr = (matrix.replace('matrix(','').replace(')','')).split(',');\n        let cos = arr[0],\n            sin = arr[1],\n            tan = sin / cos,\n            rotate = Math.atan( tan ) * 180 / Math.PI,\n            scale = cos / ( Math.cos( Math.PI / 180 * rotate )),\n            trans;\n        trans = {\n            x:parseInt(arr[4]),\n            y:parseInt(arr[5]),\n            scale,\n            rotate,\n        };\n        return trans;\n    },\n    getUseName(evName){\n        let useName = evName.replace('start','');\n        let end = useName.indexOf('rotate') !== -1 ? 'nd' : 'end';\n        useName = useName.replace(end,'');\n        return useName;\n    },\n    domify(DOMString) {\n        let htmlDoc = document.implementation.createHTMLDocument();\n        htmlDoc.body.innerHTML = DOMString;\n        return htmlDoc.body.children;\n    },\n    getEl(el){\n        if(!el){\n            console.error('el error,there must be a el!');\n            return;\n        }\n        let _el;\n        if(typeof el == 'string'){\n            _el = document.querySelector(el);\n        }else if(el instanceof Node){\n            _el = el;\n        }else{\n            console.error('el error,there must be a el!');\n            return;\n        }\n        return _el;\n    },\n    data(el,key){\n        el = this.getEl(el);\n        return el.getAttribute(`data-${key}`);\n    },\n    include(str1,str2){\n        if(str1.indexOf){\n            return str1.indexOf(str2) !== -1;\n        }else{\n            return false;\n        }\n    },\n    getPos(el) {\n        if(!el)return;\n        el = this.getEl(el);\n        let defaulTrans;\n        let style = window.getComputedStyle(el,null);\n        let cssTrans = style.transform || style.webkitTransform;\n\n        if(window.getComputedStyle && cssTrans !== 'none'){\n            defaulTrans = this.matrixTo(cssTrans);\n        }else{\n            defaulTrans = {\n                x: 0,\n                y: 0,\n                scale: 1,\n                rotate: 0,\n            };\n        }\n        return JSON.parse(el.getAttribute('data-mtouch-status')) || defaulTrans;\n    },\n    addCssRule(selector, rules){\n        if(!sheet){\n            sheet = createStyleSheet();\n        }\n        sheet.insertRule(`${selector}{${rules}}`,sheet.rules.length);\n    },\n};\n\nfunction createStyleSheet() {\n    let style = document.createElement('style');\n    style.type = 'text/css';\n    document.head.appendChild(style);\n    return style.sheet;\n}\n","let base64 = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyppVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3QUY3RkU4M0E5OEIxMUU2QjU0QTkxRjBDMUE2RDg3NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3QUY3RkU4NEE5OEIxMUU2QjU0QTkxRjBDMUE2RDg3NCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjdBRjdGRTgxQTk4QjExRTZCNTRBOTFGMEMxQTZEODc0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjdBRjdGRTgyQTk4QjExRTZCNTRBOTFGMEMxQTZEODc0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+ckj5SQAAA5tJREFUeNrsm0tIVUEYx7+TSuHVIk2sjfTQTaQLo425KXq3yF7gwrASwozKVmG0DNoElUQgYRQECT0JKum1SjeRkFaLnuAmpCxIrxkit//X/W7dpOu9Z+acmSOeD34oepn5fs6Z15nRicViNJ1iBk2zCIVD4VB4akd2ql/UnvGk/CJQBSpBKVgE5oE8+f0w+AI+gnegB3TJz7Sio9mlsEYUgO1COXAm+WyesBCskp/xPNkHbghfjbSwQhSDw/xwgFka5fAfqEJoAVdBKxgISh/OAU3gKditKTsxuKw9UnaT1GVVmPvkXXAcRHwcayJSx31QZkt4HegEywwOskvBPanbqHA9aAf5FmaWiNRdb0q4DpwEWRan0yzJoc5v4Q1SUVCCc1nvlzAPUGctt+z/WrpVcvNUmKeDNkt9Nl3kS27ZXgrvNzwauw3ObZ9XK635oDmDteuCdJ+5/YyGOrp+r5/9iCOyFB3QbeFGL1ZPPssmpqtG3Ue6QGXotyCbiF1gro7wDpCrKTtsSJYk1506wtu0n7OZ5DhmB7CtqsJFsp/VirUVFNm7mmYblK6QlwyuhavSbN4n7bMPeylqSdqR3F1PS5U6A5STJJv89eIT+m7g1f9ycMdtC5epyibe07CcpZYuVXmkS3SnHovSJSrChW5qSDX1WJIuVBHO9ar2hPSjPmPSuX684nEt3f7YqLRr4ZEpLD2iIjwYlJauXel6Hz6oItwfhMebZWtW/DmayTT6VYTf2u7TirIc71RWWj2mBjL+fk35vyuy6E+KKcpyPFcR7pacHFvSGkV2qzzSnyl+imdlytKIXprkuDXdPHzT5DwdHSUv9hW3dF4AXAc/TAjzALVFvc8mgnO9piPMh9EdJmRr9GVJcv2mI8xxDoxOAVnu/63pPpTJe+lPFD9iOeqHMHZZvK0c8qCo05TBLYFMNw/nwWsKbrwCF3Q3D8kxRvErB9EAynJOByRHz4Q53oBDYDxAspzLQcmNvBbm4DsWLQES5lw6vdoPp4orUtG45ZZtkVzIb2GOy6CByNgRysQ+2yA5kClhjgcUvwLx0qAszxSbpG4yLczxAWwGJ3wewaNSx0bdfboXL/HGZJ6uBpc8XpWNSpnVUseYboFe3rXkVc4xcIriR5Z8ipfucmmqjVOv7NQCfbk0ecPRJhRL6/CJ3hKwGMyh+A3aHPp7fZi7xnvwguLXhwf86htO+F8toXAoHAqHwgGOXwIMAGwpGJYKZlZqAAAAAElFTkSuQmCC`;\n\nexport default base64;\n","export default class HandlerBus{\n    constructor(el) {\n        this.handlers = [];\n        this.el = el;\n    }\n    add(handler){\n        this.handlers.push(handler);\n        return this;\n    }\n    del(handler){\n        if(!handler){\n            this.handlers = [];\n        }else{\n            this.handlers.forEach((value,index)=>{\n                if(value === handler){\n                    this.handlers.splice(index,1);\n                }\n            });\n        }\n        return this;\n    }\n    fire(){\n        if(!this.handlers || !this.handlers.length === 0)return;\n        this.handlers.forEach(handler=>{\n            if(typeof handler === 'function') handler.apply(this.el, arguments);\n        });\n        return this;\n    }\n}\n","import _ from './utils';\nimport singleBtn from './singleBtn';\nimport HandlerBus from './handlerBus';\n\nconst EVENT = ['touchstart','touchmove','touchend','drag','dragstart','dragend','pinch','pinchstart','pinchend','rotate','rotatestart','rotatend','singlePinchstart','singlePinch','singlePinchend','singleRotate','singleRotatestart','singleRotatend'];\n\nconst ORIGINEVENT = ['touchstart', 'touchmove', 'touchend', 'touchcancel'];\n\nexport default function MTouch(el = '') {\n    // 兼容不使用 new 的方式；\n    if (!(this instanceof MTouch))return new MTouch(el);\n    // 开关；\n    // 初始化时关闭，在调用 on 函数时对应开启；\n    this.use = {\n        drag: false,\n        pinch: false,\n        rotate: false,\n        singlePinch: false,\n        singleRotate: false,\n    };\n    // 获取容器元素；\n    this.operator = this.el = _.getEl(el);\n    // 状态记录；\n    this.draging = this.pinching = this.rotating = this.singlePinching = this.singleRotating = false;\n    // 全局参数记录；\n    this.fingers = 0;\n    this.startScale = 1;\n    this.startPoint = {};\n    this.secondPoint = {};\n    this.pinchStartLength = null;\n    this.singlePinchStartLength = null;\n    this.vector1 = {};\n    this.singleBasePoint = {};\n\n    // 插入css;\n    this._css();\n    // 初始化注册事件队列；\n    this._driveBus();\n    // 监听原生 touch 事件；\n    this._bind();\n}\n\nMTouch.prototype._driveBus = function() {\n    EVENT.forEach(evName => {\n        this[evName] = new HandlerBus(this.el);\n    });\n};\n\nMTouch.prototype._bind = function() {\n    ORIGINEVENT.forEach(evName => {\n        let fn = evName == 'touchcancel'? 'end': evName.replace('touch', '');\n        // 需要存下 bind(this) 后的函数指向，用于 destroy;\n        this[`_${fn}_bind`] = this[`_${fn}`].bind(this);\n        this.el.addEventListener(evName, this[`_${fn}_bind`], false);\n    });\n};\nMTouch.prototype.destroy = function() {\n    ORIGINEVENT.forEach(evName => {\n        let fn = evName == 'touchcancel' ? 'end' : evName.replace('touch', '');\n        this.el.removeEventListener(evName, this[`_${fn}_bind`], false);\n    });\n};\nMTouch.prototype._start = function(e) {\n    if (!e.touches || e.type !== 'touchstart')return;\n    // 记录手指数量；\n    this.fingers = e.touches.length;\n    // 记录第一触控点；\n    this.startPoint = _.getPoint(e, 0);\n    // 计算单指操作时的基础点；\n    this.singleBasePoint = _.getBasePoint(this.operator);\n    // 双指操作时\n    if (this.fingers > 1) {\n        // 第二触控点；\n        this.secondPoint = _.getPoint(e, 1);\n        // 计算双指向量；\n        this.vector1 = _.getVector(this.secondPoint, this.startPoint);\n        // 计算向量模；\n        this.pinchStartLength = _.getLength(this.vector1);\n    } else if (this.use.singlePinch) {\n        // 单指且监听 singlePinch 时，计算向量模；\n        let pinchV1 = _.getVector(this.startPoint, this.singleBasePoint);\n        this.singlePinchStartLength = _.getLength(pinchV1);\n    }\n    // 触发 touchstart 事件；\n    this.touchstart.fire({origin: e, eventType: 'touchstart'});\n};\nMTouch.prototype._move = function(ev) {\n    if (!ev.touches || ev.type !== 'touchmove')return;\n    // 判断触控点是否为 singlebutton 区域；\n    let isSingleButton = _.data(ev.target,'singleButton'),\n        curFingers = ev.touches.length,\n        curPoint = _.getPoint(ev, 0),\n        singlePinchLength,\n        pinchLength,\n        rotateV1,\n        rotateV2,\n        pinchV2;\n    // 当从原先的两指到一指的时候，可能会出现基础手指的变化，导致跳动；\n    // 因此需屏蔽掉一次错误的touchmove事件，待重新设置基础指后，再继续进行；\n    if (curFingers < this.fingers) {\n        this.startPoint = curPoint;\n        this.fingers = curFingers;\n        return;\n    }\n    // 两指先后触摸时，只会触发第一指一次 touchstart，第二指不会再次触发 touchstart；\n    // 因此会出现没有记录第二指状态，需要在touchmove中重新获取参数；\n    if (curFingers > 1 && (!this.secondPoint || !this.vector1 || !this.pinchStartLength)) {\n        this.secondPoint = _.getPoint(ev, 1);\n        this.vector1 = _.getVector(this.secondPoint, this.startPoint);\n        this.pinchStartLength = _.getLength(this.vector1);\n    }\n    // 双指时，需触发 pinch 和 rotate 事件；\n    if (curFingers > 1) {\n        let curSecPoint = _.getPoint(ev, 1),\n            vector2 = _.getVector(curSecPoint, curPoint);\n        // 触发 pinch 事件；\n        if (this.use.pinch) {\n            pinchLength = _.getLength(vector2);\n            this._eventFire('pinch', {\n                delta: {\n                    scale: pinchLength / this.pinchStartLength,\n                },\n                origin: ev,\n            });\n            this.pinchStartLength = pinchLength;\n        }\n        // 触发 rotate 事件；\n        if (this.use.rotate) {\n            this._eventFire('rotate', {\n                delta: {\n                    rotate: _.getAngle(this.vector1, vector2),\n                },\n                origin: ev,\n            });\n            this.vector1 = vector2;\n        }\n    } else {\n        // 触发 singlePinch 事件;\n        if (this.use.singlePinch && isSingleButton) {\n            pinchV2 = _.getVector(curPoint, this.singleBasePoint);\n            singlePinchLength = _.getLength(pinchV2);\n            this._eventFire('singlePinch', {\n                delta: {\n                    scale: singlePinchLength / this.singlePinchStartLength,\n                    deltaX:curPoint.x - this.startPoint.x,\n                    deltaY:curPoint.y - this.startPoint.y,\n                },\n                origin: ev,\n            });\n            this.singlePinchStartLength = singlePinchLength;\n        }\n        // 触发 singleRotate 事件;\n        if (this.use.singleRotate && isSingleButton) {\n            rotateV1 = _.getVector(this.startPoint, this.singleBasePoint);\n            rotateV2 = _.getVector(curPoint, this.singleBasePoint);\n            this._eventFire('singleRotate', {\n                delta: {\n                    rotate: _.getAngle(rotateV1, rotateV2),\n                },\n                origin: ev,\n            });\n        }\n    }\n    // 触发 drag 事件；\n    if (this.use.drag) {\n        if (!isSingleButton) {\n            this._eventFire('drag', {\n                delta: {\n                    deltaX: curPoint.x - this.startPoint.x,\n                    deltaY: curPoint.y - this.startPoint.y,\n                },\n                origin: ev,\n            });\n        }\n    }\n    this.startPoint = curPoint;\n    // 触发 touchmove 事件；\n    this.touchmove.fire({eventType: 'touchmove', origin: ev});\n    ev.preventDefault();\n};\nMTouch.prototype._end = function(ev) {\n    if (!ev.touches && ev.type !== 'touchend' && ev.type !== 'touchcancel')return;\n    // 触发 end 事件；\n    ['pinch', 'drag', 'rotate', 'singleRotate', 'singlePinch'].forEach(evName => {\n        this._eventEnd(evName, {origin: ev});\n    });\n    this.touchend.fire({eventType: 'touchend', origin: ev});\n};\nMTouch.prototype._eventFire = function(evName, ev) {\n    let ing = `${evName}ing`,\n        start = `${evName}start`;\n    if (!this[ing]) {\n        ev.eventType = start;\n        this[start].fire(ev);\n        this[ing] = true;\n    } else {\n        ev.eventType = evName;\n        this[evName].fire(ev);\n    }\n};\nMTouch.prototype._eventEnd = function(evName, ev) {\n    let ing = `${evName}ing`,\n        end;\n    if (evName == 'rotate' || evName == 'singleRotate') {\n        end = `${evName}nd`;\n    } else {\n        end = `${evName}end`;\n    }\n    if (this[ing]) {\n        ev.eventType = end;\n        this[end].fire(ev);\n        this[ing] = false;\n    }\n};\n// 添加 button 区域；\n// 背景样式由业务方定制；\nMTouch.prototype._addButton = function(el){\n    let button = _.domify(`<div class=\"mtouch-singleButton\" data-singleButton='true'></div>`)[0];\n    el.appendChild(button);\n    el.setAttribute('data-mtouch-addButton',true);\n};\n// 切换 operator;\nMTouch.prototype.switch = function(el,addButton = true) {\n    let _el;\n    if(!el){\n        this.operator = this.el;\n        return;\n    }\n    this.operator = _el = _.getEl(el);\n    if(!_.data(_el,'mtouch-addButton') && (this.use.singleRotate || this.use.singlePinch) && addButton){\n        this._addButton(_el);\n    }\n};\nMTouch.prototype.on = function(evName, handler = ()=>{}, operator) {\n    if(_.include(evName,' ')){\n        evName.split(' ').forEach(v=>{\n            this._on(v,handler,operator);\n        });\n    }else{\n        this._on(evName,handler,operator);\n    }\n    return this;\n};\nMTouch.prototype._on = function(evName,handler,operator){\n    this.use[_.getUseName(evName)] = true;\n    this[evName].add(handler);\n    this.switch(operator);\n};\nMTouch.prototype.off = function(evName, handler) {\n    this[evName].del(handler);\n};\n\nMTouch.prototype._css = function(){\n    _.addCssRule('.mtouch-singleButton',`z-index:9999;position:absolute;right:-15px;bottom: -15px;width:30px;height: 30px;background-size: 100% 100%;background-image:url(${singleBtn});`);\n};\n"],"names":["sheet","v1","error","Math","sqrt","x","y","v2","direction","getLength","len2","mr","len1","dot","r","acos","PI","el","offset","getOffset","left","getBoundingClientRect","width","top","round","obj1","obj2","k","hasOwnProperty","Node","extend","p1","p2","ev","index","touches","pageX","pageY","document","querySelector","rect","body","scrollLeft","scrollTop","offsetWidth","offsetHeight","matrix","arr","replace","split","cos","sin","tan","rotate","atan","scale","trans","parseInt","evName","useName","end","indexOf","DOMString","htmlDoc","implementation","createHTMLDocument","innerHTML","children","_el","key","getEl","getAttribute","str1","str2","defaulTrans","style","window","getComputedStyle","cssTrans","transform","webkitTransform","matrixTo","JSON","parse","selector","rules","createStyleSheet","insertRule","length","createElement","type","head","appendChild","base64","HandlerBus","handlers","handler","push","forEach","value","splice","apply","EVENT","ORIGINEVENT","MTouch","use","operator","_","draging","pinching","rotating","singlePinching","singleRotating","fingers","startScale","startPoint","secondPoint","pinchStartLength","singlePinchStartLength","vector1","singleBasePoint","_css","_driveBus","_bind","prototype","fn","bind","addEventListener","destroy","removeEventListener","_start","e","getPoint","getBasePoint","getVector","singlePinch","pinchV1","touchstart","fire","origin","eventType","_move","isSingleButton","data","target","curFingers","curPoint","singlePinchLength","pinchLength","rotateV1","rotateV2","pinchV2","curSecPoint","vector2","pinch","_eventFire","getAngle","singleRotate","drag","touchmove","preventDefault","_end","_eventEnd","touchend","ing","start","_addButton","button","domify","setAttribute","switch","addButton","on","include","_on","v","getUseName","add","off","del","addCssRule","singleBtn"],"mappings":"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"}